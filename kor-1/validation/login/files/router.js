define(["nougat","jquery","backbone","BaseView","widgets/pageView"],function(e,t,n,r,i){"use strict";var s,o,u,a=t("#content").attr("data-country");s=new(n.Router.extend({hasPushState:window.history&&"pushState"in window.history,routes:{account:"showView",create:"showView",paymentMethod:"showView",addCard:"showView",addBank:"showView",confirmBank:"showView",fasterPayments:"showView",applyBml:"showView",createPin:"showView",bankAuth:"showView","bankAuth?*queryString":"showLanding","bankAuth/:page":"showLanding","account?*queryString":"showLanding","create?*queryString":"showLanding","paymentMethod?*queryString":"showLanding","addCard?*queryString":"showLanding","addBank?*queryString":"showLanding","applyBml?*queryString":"showLanding","createPin?*queryString":"showLanding","swallet/:page":"showLanding","":"showLanding"},showLanding:function(){var e=["intent/account","intent/create","signup/account","signup/create","signup/captcha","wallet/paymentMethod","wallet/addCard","wallet/addBank","wallet/sepaMandate","wallet/bankDirectDebit","wallet/confirmBank","wallet/fasterPayments","wallet/applyBml","wallet/directDebitAgreementPrint","swallet/account","swallet/create","swallet/paymentMethod","swallet/addCard","swallet/addPin"];jQuery.inArray(o,e)>-1&&(o=o.replace("signup/",""),o=o.replace("swallet/",""),o=o.replace("wallet/",""),o=o.replace("intent/",""),this.showView(o))},showView:function(e){var t=e||n.history.fragment,r;a==="AU"&&(t==="create"||t==="addCard")&&require(["view/address"]),t==="directDebitAgreementPrint"||t==="sepaMandate"||t==="bankDirectDebit"?r=["view/bankAuth"]:r=["view/"+t],require(r,function(e){u.activate(e)})}})),t(function(){var r;e.setContext(t(document.body).data()),r=e.getContext(),o=r.viewName,o!=="index"&&(t(document.body).removeClass("loading"),document.body.removeAttribute("data-view-name")),u=new i,window.location.hash&&(window.location.hash=""),n.history.start({pushState:this.hasPushState,root:"/signup/"});if(this.hasPushState)n.history.loadUrl(n.history.getFragment());else{var s=n.history.options.root.length,a=window.location.hash||window.location.pathname.substr(s);n.history.fragment=null}r.viewName==="swallet/create"&&t("#accountCreatedFlag").length>0?(t("#page").hide(),window.history.forward()):r.viewName==="swallet/account"&&t("#accountCreatedFlag").length>0?(t("#page").hide(),window.history.go(2)):r.viewName==="swallet/addPin"&&t("#pinCreatedFlag").length>0&&(t("#page").hide(),window.history.forward())})});