define(["jquery","jqueryUI"],function(e){"use strict";e.widget("pp.restrict",{options:{allow:"numeric"},_create:function(){this._addListeners()},_addListeners:function(){this.element.bind("keyup paste",function(){setTimeout(e.proxy(function(){this.val(this.val().replace(/[^0-9]/g,""))},e(this)),0)}),this.element.bind("keypress",e.proxy(this._keypress,this)),this.element.bind("keydown",e.proxy(this._keydown,this)),this.element.bind("blur",e.proxy(this._validate,this))},_keypress:function(e){if(this.options.allow==="numeric")return this._onlyNumeric(e)},_onlyNumeric:function(t){var n,r;return n=e(t.target),t.metaKey||t.ctrlKey?!0:t.which===32?!1:t.which===0?!0:t.which<33?!0:(r=String.fromCharCode(t.which),!!/[\d\s]/.test(r))},_keydown:function(t){var n,r;if(t.meta)return;n=e(t.currentTarget),r=n.val();if(t.which!==8)return;if(n.prop("selectionStart")!==null&&n.prop("selectionStart")!==r.length)return;if(/\d(\s|\-)+$/.test(r))return t.preventDefault(),n.val(r.replace(/\d(\s|\-)+$/,""));if(/\s\-\s?\d?$/.test(r))return t.preventDefault(),n.val(r.replace(/\s\-\s?\d?$/,""))},_paste:function(e){if(e===undefined||e.type==="paste"){var t=e.originalEvent.clipboardData.getData("Text");if(t.length){var n=this._format(t);this.element.val(n),this._validate(this.options.allow)}}},_format:function(e){return this.options.allow==="numeric"&&(e=e.replace(/\D/g,"")),e},_validate:function(){var e=this.element.val();e!==undefined&&e!==""&&this.options.allow==="numeric"&&(/^\d+$/.test(e)?this.element.parent().removeClass("hasError error-format"):this.element.parent().addClass("hasError error-format"))}})});